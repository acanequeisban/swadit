"use strict";(self.webpackChunksb_admin_angular4_bootstrap4=self.webpackChunksb_admin_angular4_bootstrap4||[]).push([[566],{9566:(z,f,a)=>{a.r(f),a.d(f,{DefinitionsModule:()=>P});var d=a(6814),l=a(6223),p=a(3386),v=a(4611),x=a(6547),b=a(3041),m=a(3232),g=a(2660),t=a(8830),_=a(6352),y=a(511);function Z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteDefinition())}),t._uU(1," Delete"),t.qZA()}}function T(n,r){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorStr," ")}}let h=(()=>{class n{static#t=this.modalOptions={size:"lg"};constructor(e,i){this.activeModal=e,this.apis=i,this.key=null,this.key_orig=null,this.obj=null,this.obj_orig=null,this.errorStr=null}ngOnInit(){this.key_orig=this.key,this.obj_orig=this.obj,this.obj_orig||(this.obj_orig={}),this.obj=(0,g.Z)(this.obj_orig)}ok(){if(console.log("DefinitionEditComponent.ok()"),!this.key||!this.key.trim())return void(this.errorStr="Please enter a key name.");if(this.key=this.key.trim(),this.key!=this.key_orig&&this.apis.current.definitions&&this.apis.current.definitions[this.key])return void(this.errorStr="Key name already exists.");if(!this.obj.type&&!this.obj.$ref&&!Array.isArray(this.obj.allOf))return void(this.errorStr="Please enter a type or $ref.");const e=(0,g.Z)(this.obj);this.apis.cleanUpSwaggerSchema(e),Object.keys(this.obj_orig).forEach(i=>delete this.obj_orig[i]),Object.keys(e).forEach(i=>this.obj_orig[i]=e[i]),console.log("definition-edit",e),this.key_orig?this.key!=this.key_orig&&this.apis.renameObjectKey(this.apis.current.definitions,this.key_orig,this.key):(this.apis.current.definitions||(this.apis.current.definitions={}),this.apis.current.definitions[this.key]=this.obj_orig),this.errorStr="",this.activeModal.close("ok")}deleteDefinition(){console.log("DefinitionEditComponent.deleteDefinition()"),this.key_orig&&(delete this.apis.current.definitions[this.key_orig],this.activeModal.close("ok"))}static#i=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.Kz),t.Y36(_.Q))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-definition-edit"]],decls:18,vars:7,consts:[[3,"ngSubmit"],["editForm","ngForm"],["id","modal-body",1,"modal-body"],[1,"form-group"],["for","definitionKey"],["type","text","id","definitionKey","name","definitionKey","required","","placeholder","Enter name for definition","title","Name of definition",1,"form-control",3,"ngModel","ngModelChange"],["for","definitionSchema"],[3,"schema","obj","id","objChange"],[1,"modal-footer"],["class","btn btn-danger mr-auto","type","button","title","Delete definition",3,"click",4,"ngIf"],["style","color: red",4,"ngIf"],["type","submit","title","Apply changes",1,"btn","btn-primary",3,"disabled"],["type","button","title","Do not apply changes",1,"btn","btn-warning",3,"click"],["type","button","title","Delete definition",1,"btn","btn-danger","mr-auto",3,"click"],[2,"color","red"]],template:function(i,o){if(1&i&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return o.ok()}),t.TgZ(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Name of schema definition"),t.qZA(),t.TgZ(6,"input",5),t.NdJ("ngModelChange",function(c){return o.key=c}),t.qZA()(),t.TgZ(7,"div",3)(8,"label",6),t._uU(9,"Schema definition"),t.qZA(),t.TgZ(10,"swadit-swagger-schema-editor",7),t.NdJ("objChange",function(c){return o.obj=c}),t.qZA()()(),t.TgZ(11,"div",8),t.YNc(12,Z,2,0,"button",9),t.YNc(13,T,2,1,"span",10),t.TgZ(14,"button",11),t._uU(15," Apply"),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return o.activeModal.dismiss("cancel")}),t._uU(17," Cancel"),t.qZA()()()),2&i){const s=t.MAs(1);t.xp6(6),t.Q6J("ngModel",o.key),t.xp6(4),t.Q6J("schema",o.apis.schemas.schema)("obj",o.obj)("id","definitionSchema"),t.xp6(2),t.Q6J("ngIf",o.key_orig),t.xp6(1),t.Q6J("ngIf",o.errorStr),t.xp6(1),t.Q6J("disabled",!s.form.valid)}},dependencies:[d.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,y.v],styles:["label[_ngcontent-%COMP%]{font-size:80%;font-weight:700;margin-bottom:.3rem}"]})}return n})();var u=a(4239),C=a(6962),k=a(5699),D=a(1548),w=a(7958);function J(n,r){if(1&n&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.apis.getComponentsCount(e)," ")}}const j=function(n){return{active:n}};function A(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",17)(1,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.defCat=s)}),t.TgZ(2,"span",19),t._uU(3),t.qZA(),t.YNc(4,J,2,1,"span",20),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,j,e==i.defCat)),t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i.apis.getComponentsCount(e)>0)}}function M(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filterText="")}),t._UZ(1,"i",23),t.qZA()}}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.edit(o))}),t._UZ(1,"i",25),t.qZA()}}function O(n,r){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" in ",i.apis.getComponents(i.defCat)[e].in,"")}}function N(n,r){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" (",i.apis.getComponents(i.defCat)[e].type,") ")}}function Q(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.apis.getComponents(i.defCat)[e].description," ")}}function S(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw().$implicit,c=t.oxw();return t.KtG(c.edit(o,s))}),t._UZ(1,"i",36),t.qZA()}}function F(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"swadit-parameter-view",41),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("obj",i.apis.getComponents(i.defCat)[e])}}function E(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"swadit-response-view",41),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("obj",i.apis.getComponents(i.defCat)[e])}}function U(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"swadit-swagger-schema-view",42),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("obj",i.apis.getComponents(i.defCat)[e])("generateExample",!0)}}function Y(n,r){if(1&n&&(t.TgZ(0,"div",37)(1,"div",38),t.YNc(2,F,2,1,"div",39),t.YNc(3,E,2,1,"div",39),t.YNc(4,U,2,2,"div",40),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngSwitch",e.defCat),t.xp6(1),t.Q6J("ngSwitchCase","parameters"),t.xp6(1),t.Q6J("ngSwitchCase","responses")}}function q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.uncollapsedDef[s]=!c.uncollapsedDef[s])}),t.TgZ(2,"div",3)(3,"div",28),t._uU(4),t.YNc(5,O,2,1,"span",29),t.YNc(6,N,2,1,"span",29),t.YNc(7,Q,2,1,"span",30),t.qZA(),t.TgZ(8,"div",31),t.YNc(9,S,2,0,"div",32),t.qZA()()(),t.YNc(10,Y,5,3,"div",33),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(4),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",i.apis.getComponents(i.defCat)[e].in),t.xp6(1),t.Q6J("ngIf",i.apis.getComponents(i.defCat)[e].type),t.xp6(1),t.Q6J("ngIf",i.apis.getComponents(i.defCat)[e].description),t.xp6(2),t.Q6J("ngIf",!i.apis.config.readOnly&&i.apis.isOas2),t.xp6(1),t.Q6J("ngIf",i.uncollapsedDef[e])}}const $=[{path:"",component:(()=>{class n{constructor(e,i){this.apis=e,this.modalService=i,this.uncollapsedDef={},this.sortItems=!1,this.defCat="schemas",this.apis.eventApiChanged.subscribe(()=>{this.initDefCat()})}ngOnInit(){this.initDefCat()}initDefCat(){this.apis.getDefCategories().includes(this.defCat)||(this.apis.isOas2?this.defCat="definitions":this.apis.isOas3&&(this.defCat="schemas"))}keys(e){return e?Object.keys(e):[]}edit(e=null,i=null){console.log("edit()",i),e&&e.stopPropagation();let s,o=null;switch(this.defCat){case"definitions":o=h,s=h.modalOptions;break;case"parameters":o=u.X,s=u.X.modalOptions;break;case"responses":o=C.n,s=C.n.modalOptions}o?(this.editModal=this.modalService.open(o,s),this.editModal.componentInstance.parent=this.apis.current,this.editModal.componentInstance.key=i,this.editModal.componentInstance.obj=i?this.apis.getComponents(this.defCat)[i]:{},this.editModal.result.then(c=>{this.closeResult=`Closed with: ${c}`,console.info("edit(): "+this.closeResult)},c=>{this.closeResult=`Dismissed ${this.getDismissReason(c)}`,console.warn("edit(): "+this.closeResult)})):console.warn("Not yet implemented: edit for components of type "+this.defCat)}getDismissReason(e){return e===p.If.ESC?"by pressing ESC":e===p.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.Q),t.Y36(p.FF))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-definitions"]],decls:18,vars:6,consts:[[1,"nav","nav-tabs","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],[1,"filterBox"],[1,"row"],[1,"col-md-6"],[1,"input-group"],[1,"input-group-text"],[1,"fa","fa-filter"],["type","text","name","filterText","placeholder","Filter by key name","title","Filter by key name",1,"form-control",3,"ngModel","ngModelChange"],["class","input-group-text clickable",3,"click",4,"ngIf"],[1,"col-md-5"],[1,"checkbox"],["type","checkbox","name","sortItems","id","sortItems","title","Display sorted",3,"ngModel","ngModelChange"],["for","sortItems",1,"ms-1","mb-0",2,"margin-top","0.4rem"],[1,"col-md-1","text-end"],["class","edit-subsection me-3","style","font-size: 120%","title","Add item",3,"click",4,"ngIf"],["class","card mb-2",4,"ngFor","ngForOf"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"ngClass","click"],[2,"text-transform","capitalize"],["class","badge rounded-pill badge-light ms-1",4,"ngIf"],[1,"badge","rounded-pill","badge-light","ms-1"],[1,"input-group-text","clickable",3,"click"],[1,"fa","fa-times"],["title","Add item",1,"edit-subsection","me-3",2,"font-size","120%",3,"click"],[1,"fa","fa-plus"],[1,"card","mb-2"],[1,"card-header","clickable",3,"click"],[1,"col-md-10","preview"],["class","headerType",4,"ngIf"],[4,"ngIf"],[1,"col-md-2"],["class","edit-card",3,"click",4,"ngIf"],["class","card-block",4,"ngIf"],[1,"headerType"],[1,"edit-card",3,"click"],[1,"fa","fa-fw","fa-pencil"],[1,"card-block"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"obj"],[3,"obj","generateExample"]],template:function(i,o){1&i&&(t.TgZ(0,"ul",0),t.YNc(1,A,5,5,"li",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),t._UZ(7,"i",7),t.qZA(),t.TgZ(8,"input",8),t.NdJ("ngModelChange",function(c){return o.filterText=c}),t.qZA(),t.YNc(9,M,2,0,"span",9),t.qZA()(),t.TgZ(10,"div",10)(11,"div",11)(12,"input",12),t.NdJ("ngModelChange",function(c){return o.sortItems=c}),t.qZA(),t.TgZ(13,"label",13),t._uU(14,"Display sorted"),t.qZA()()(),t.TgZ(15,"div",14),t.YNc(16,I,2,0,"div",15),t.qZA()()(),t.YNc(17,q,11,6,"div",16)),2&i&&(t.xp6(1),t.Q6J("ngForOf",o.apis.getDefCategories()),t.xp6(7),t.Q6J("ngModel",o.filterText),t.xp6(1),t.Q6J("ngIf",o.filterText),t.xp6(3),t.Q6J("ngModel",o.sortItems),t.xp6(4),t.Q6J("ngIf",!o.apis.config.readOnly&&o.apis.isOas2),t.xp6(1),t.Q6J("ngForOf",o.apis.filterList(o.keys(o.apis.getComponents(o.defCat)),o.filterText,o.sortItems)))},dependencies:[d.mk,d.sg,d.O5,d.RF,d.n9,d.ED,l.Fj,l.Wl,l.JJ,l.On,k.h,D.t,w.B],styles:[".card-header[_ngcontent-%COMP%]{padding:.5em .75em}.preview[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.card-block[_ngcontent-%COMP%]{padding:.75rem}.headerType[_ngcontent-%COMP%]{color:#bbb}"]})}return n})()}];let K=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[m.Bz.forChild($),m.Bz]})}return n})(),P=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[d.ez,l.u5,p.IJ,v.JP.forChild(),x.z,b.P,K]})}return n})()}}]);